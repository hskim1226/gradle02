<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.apexsoft.ysprj.applicants.admission.sqlmap.CustomAdmissionCourseMajorLanguageMapper">
  <resultMap id="BaseResultMap" type="com.apexsoft.ysprj.applicants.admission.domain.AdmissionCourseMajorLanguage">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 03 21:15:46 KST 2014.
    -->
    <id column="ADMS_CORS_NO" jdbcType="INTEGER" property="admsCorsNo" />
    <id column="DETL_MAJ_CODE" jdbcType="VARCHAR" property="detlMajCode" />
    <id column="EXAM_CODE" jdbcType="VARCHAR" property="examCode" />
    <result column="MDT_YN" jdbcType="VARCHAR" property="mdtYn" />
    <result column="CAN_YN" jdbcType="VARCHAR" property="canYn" />
    <result column="MIN_SCR" jdbcType="INTEGER" property="minScr" />
    <result column="MSG_NO" jdbcType="VARCHAR" property="msgNo" />
    <result column="CRE_ID" jdbcType="VARCHAR" property="creId" />
    <result column="CRE_DATE" jdbcType="DATE" property="creDate" />
    <result column="MOD_ID" jdbcType="VARCHAR" property="modId" />
    <result column="MOD_DATE" jdbcType="DATE" property="modDate" />
  </resultMap>

  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 03 21:15:46 KST 2014.
    -->
    ADMS_CORS_NO, DETL_MAJ_CODE, EXAM_CODE, MDT_YN, CAN_YN, MIN_SCR, MSG_NO, CRE_ID, 
    CRE_DATE, MOD_ID, MOD_DATE
  </sql>

  <select id="selectAvailableExamListByAdmsCorsNoDetlMajCode"
          parameterType="com.apexsoft.ysprj.applicants.admission.domain.ParamForAdmissionCourseMajor"
          resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 03 21:15:46 KST 2014.
    -->
    select 
    <include refid="Base_Column_List" />
    from ADMS_CORS_MAJ_LANG
    where ADMS_CORS_NO = #{admsCorsNo,jdbcType=INTEGER}
      and DETL_MAJ_CODE = #{detlMajCode,jdbcType=VARCHAR}
  </select>

    <select id="selectAvailableExamListByAdmsNoDetlMajCode"
            parameterType="com.apexsoft.ysprj.applicants.admission.domain.ParamForAdmissionCourseMajor"
            resultMap="BaseResultMap">
      SELECT A.EXAM_CODE, A.EXAM_NAME, ifnull(D.CAN_YN,'N') AS CAN_YN
      FROM LANG_EXAM A
      LEFT OUTER JOIN ( SELECT B.EXAM_CODE, B.CAN_YN
        FROM ADMS_CORS_MAJ_LANG B, ADMS_CORS C
        WHERE B.ADMS_CORS_NO = C.ADMS_CORS_NO
          AND C.ADMS_NO = #{admsNo,jdbcType=VARCHAR}
          AND C.DEPT_CODE = #{deptCode,jdbcType=VARCHAR}
          AND IFNULL(C.ARI_INST_CODE,'') = IFNULL(#{ariInstCode,jdbcType=VARCHAR},'')
          AND C.CORS_TYPE_CODE = #{corsTypeCode,jdbcType=VARCHAR}
          AND B.DETL_MAJ_CODE = #{detlMajCode,jdbcType=VARCHAR} ) D
      ON A.EXAM_CODE = D.EXAM_CODE
      WHERE A.LANG_CODE = 'ENG'
      order by 1
    </select>
</mapper>