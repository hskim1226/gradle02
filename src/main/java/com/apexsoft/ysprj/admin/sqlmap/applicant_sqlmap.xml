<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin.applicant">

    <resultMap id="entireApplicantInfo"
               type="com.apexsoft.ysprj.admin.domain.ApplicantInfo">
        <id property="applNo" column="appl_no"/>
        <result property="userId" column="user_id"/>
        <result property="admsNo" column="adms_no"/>
        <result property="campName" column="camp_name"/>         
        <result property="deptCode" column="dept_code"/>       
        <result property="ariInsstCode" column="ari_insst_code"/>
        <result property="corsTypeCode" column="cors_type_code"/>
        <result property="detlMajCode" column="detl_maj_code"/>
        <result property="korName" column="kor_name"/>
        <result property="engSur" column="eng_sur"/>
        <result property="engName" column="eng_name"/>
        <result property="rgstNo" column="rgst_no"/>
        <result property="telNum" column="tel_num"/>
        <result property="mobiNum" column="mobi_num"/>
        <result property="mailAddr" column="mail_addr"/>
        <result property="applId" column="appl_id"/>
        <result property="applStsCode" column="appl_sts_code"/>
        <result property="modDate" column="mod_date"/>
    </resultMap>

    <select id="retrieveApplicantListByCondition" resultMap="entireApplicantInfo" >
    	<![CDATA[
		SELECT  a.APPL_ID, H.ADMS_TYPE, F.CAMP_NAME, b.DEPT_NAME, a.CORS_TYPE_CODE, d.ARI_INST_NAME,a.DETL_MAJ_CODE,a.KOR_NAME,a.ENG_SUR,a.ENG_NAME a.RGST_NO, a.MOBI_NUM,a.MAIL_ADDR 
		FROM  APPL a 
		left outer join ARI_INST d
		on a.ARI_INST_CODE = d.ARI_INST_CODE
		, DEPT b, COLL e, CAMP F, ADMS H
		where 1=1
		AND a.DEPT_CODE = b.DEPT_CODE
		AND b.COLL_CODE= e.COLL_CODE
		AND e.CAMP_CODE = F.CAMP_CODE
		AND a.ADMS_NO = H.ADMS_NO
		]]>
        <if test="applyId != null">
            <![CDATA[AND APPL_ID = #{applId}]]>
        </if>
        <if test="korName != null">
            <![CDATA[AND KOR_NAME = #{korName}]]>
        </if>
        <if test="engName!= null">
            <![CDATA[AND ENG_NAME = #{engName}]]>
            <![CDATA[AND ENG_SUR = #{engSur}]]>            
        </if>        
        ORDER BY APPL_ID 

	</select>

    <select id="retrieveApplicantCountByCondition" resultType="java.lang.Integer" >
		<![CDATA[
		SELECT count(*) 
		FROM  APPL a 
		left outer join ARI_INST d
		on a.ARI_INST_CODE = d.ARI_INST_CODE
		, DEPT b, COLL e, CAMP F, ADMS H
		where 1=1
		AND a.DEPT_CODE = b.DEPT_CODE
		AND b.COLL_CODE= e.COLL_CODE
		AND e.CAMP_CODE = F.CAMP_CODE
		AND a.ADMS_NO = H.ADMS_NO
		]]>
        <if test="applyId != null">
            <![CDATA[AND APPL_ID = #{applId}]]>
        </if>
        <if test="korName != null">
            <![CDATA[AND KOR_NAME = #{korName}]]>
        </if>
        <if test="engName!= null">
            <![CDATA[AND ENG_NAME = #{engName}]]>
            <![CDATA[AND ENG_SUR = #{engSur}]]>            
        </if>        
    </select>
</mapper>